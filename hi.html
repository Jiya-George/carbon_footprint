<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CarbonAudit | Emissions Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Syne:wght@400;700;800&family=DM+Mono:wght@300;400;500&family=DM+Sans:wght@300;400;500&display=swap"
        rel="stylesheet">

    <style>
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg: #05080f;
            --surface: #0d1117;
            --surface2: #131920;
            --border: rgba(255, 255, 255, 0.07);
            --accent: #00e5a0;
            --accent2: #0ea5e9;
            --accent-red: #f43f5e;
            --accent-amber: #f59e0b;
            --text: #e2e8f0;
            --muted: #475569;
            --font-display: 'Syne', sans-serif;
            --font-mono: 'DM Mono', monospace;
            --font-body: 'DM Sans', sans-serif;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg);
            color: var(--text);
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* ‚îÄ‚îÄ‚îÄ COVER ‚îÄ‚îÄ‚îÄ */
        #section-cover {
            position: fixed;
            inset: 0;
            z-index: 50;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: var(--bg);
            overflow: hidden;
        }

        .cover-grid {
            position: absolute;
            inset: 0;
            background-image:
                linear-gradient(rgba(0, 229, 160, 0.04) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 229, 160, 0.04) 1px, transparent 1px);
            background-size: 60px 60px;
            mask-image: radial-gradient(ellipse 80% 80% at 50% 50%, black 40%, transparent 100%);
        }

        .cover-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
        }

        .orb-1 {
            width: 500px;
            height: 500px;
            background: rgba(0, 229, 160, 0.12);
            top: -100px;
            left: -100px;
            animation: drift 12s ease-in-out infinite alternate;
        }

        .orb-2 {
            width: 400px;
            height: 400px;
            background: rgba(14, 165, 233, 0.10);
            bottom: -80px;
            right: -80px;
            animation: drift 15s ease-in-out infinite alternate-reverse;
        }

        .orb-3 {
            width: 200px;
            height: 200px;
            background: rgba(0, 229, 160, 0.08);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: pulse-orb 4s ease-in-out infinite;
        }

        @keyframes drift {
            from {
                transform: translate(0, 0) scale(1);
            }

            to {
                transform: translate(40px, 30px) scale(1.1);
            }
        }

        @keyframes pulse-orb {

            0%,
            100% {
                opacity: 0.5;
                transform: translate(-50%, -50%) scale(1);
            }

            50% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.3);
            }
        }

        .cover-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(0, 229, 160, 0.3);
            background: rgba(0, 229, 160, 0.06);
            padding: 6px 16px;
            border-radius: 100px;
            font-family: var(--font-mono);
            font-size: 11px;
            color: var(--accent);
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-bottom: 32px;
            animation: fade-up 0.8s ease both;
        }

        .dot-live {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--accent);
            animation: blink 1.5s ease infinite;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.2;
            }
        }

        .cover-title {
            font-family: var(--font-display);
            font-size: clamp(64px, 10vw, 120px);
            font-weight: 800;
            line-height: 0.9;
            text-align: center;
            letter-spacing: -0.03em;
            animation: fade-up 0.8s 0.1s ease both;
            margin-bottom: 24px;
        }

        .cover-title .hl {
            color: var(--accent);
        }

        .cover-title .dim {
            color: var(--muted);
        }

        .cover-sub {
            font-size: 18px;
            color: var(--muted);
            font-weight: 300;
            text-align: center;
            max-width: 400px;
            line-height: 1.6;
            animation: fade-up 0.8s 0.2s ease both;
            margin-bottom: 48px;
        }

        .cover-btn {
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 18px 40px;
            background: var(--accent);
            color: #000;
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 16px;
            border: none;
            border-radius: 100px;
            cursor: pointer;
            letter-spacing: 0.01em;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 0 40px rgba(0, 229, 160, 0.3), 0 0 80px rgba(0, 229, 160, 0.1);
            animation: fade-up 0.8s 0.3s ease both;
            overflow: hidden;
        }

        .cover-btn::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), transparent);
        }

        .cover-btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 0 60px rgba(0, 229, 160, 0.5), 0 0 100px rgba(0, 229, 160, 0.15);
        }

        .cover-btn svg {
            transition: transform 0.2s;
        }

        .cover-btn:hover svg {
            transform: translateX(4px);
        }

        .cover-footnote {
            position: absolute;
            bottom: 24px;
            font-family: var(--font-mono);
            font-size: 11px;
            color: var(--muted);
            letter-spacing: 0.1em;
            animation: fade-up 0.8s 0.5s ease both;
        }

        @keyframes fade-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ‚îÄ‚îÄ‚îÄ APP ‚îÄ‚îÄ‚îÄ */
        #section-app {
            display: none;
            flex-direction: column;
            min-height: 100vh;
        }

        /* NAV */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 32px;
            height: 64px;
            border-bottom: 1px solid var(--border);
            background: rgba(5, 8, 15, 0.8);
            backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 40;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            text-decoration: none;
        }

        .nav-logo-mark {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: var(--accent);
            border-radius: 8px;
        }

        .nav-logo-mark svg {
            width: 18px;
            height: 18px;
        }

        .nav-name {
            font-family: var(--font-display);
            font-size: 18px;
            font-weight: 800;
            color: var(--text);
            letter-spacing: -0.02em;
        }

        .nav-exit {
            display: flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: 1px solid var(--border);
            color: var(--muted);
            font-family: var(--font-body);
            font-size: 13px;
            padding: 8px 16px;
            border-radius: 100px;
            cursor: pointer;
            transition: border-color 0.2s, color 0.2s;
        }

        .nav-exit:hover {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        /* MAIN GRID */
        main {
            flex: 1;
            max-width: 680px;
            width: 100%;
            margin: 0 auto;
            padding: 48px 24px;
            display: flex;
            flex-direction: column;
            gap: 24px;
            animation: fade-up 0.6s ease both;
        }

        /* CALCULATE BUTTON */
        .calc-btn {
            width: 100%;
            padding: 18px 32px;
            background: var(--accent);
            color: #000;
            font-family: var(--font-display);
            font-size: 16px;
            font-weight: 700;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            letter-spacing: 0.01em;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 0 40px rgba(0, 229, 160, 0.25), 0 0 80px rgba(0, 229, 160, 0.08);
        }

        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 60px rgba(0, 229, 160, 0.45), 0 0 100px rgba(0, 229, 160, 0.12);
        }

        .calc-btn svg {
            transition: transform 0.2s;
        }

        .calc-btn:hover svg {
            transform: translateX(4px);
        }

        .calc-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* ‚îÄ‚îÄ‚îÄ RESULTS PAGE ‚îÄ‚îÄ‚îÄ */
        #section-results {
            display: none;
            flex-direction: column;
            min-height: 100vh;
        }

        .results-main {
            max-width: 860px;
            width: 100%;
            margin: 0 auto;
            padding: 48px 24px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            animation: slide-in 0.5s cubic-bezier(0.22, 1, 0.36, 1) both;
        }

        @keyframes slide-in {
            from {
                opacity: 0;
                transform: translateX(40px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .results-back-bar {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: 1px solid var(--border);
            color: var(--muted);
            font-family: var(--font-body);
            font-size: 13px;
            padding: 8px 16px;
            border-radius: 100px;
            cursor: pointer;
            transition: border-color 0.2s, color 0.2s;
        }

        .back-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .results-heading {
            font-family: var(--font-display);
            font-size: clamp(22px, 4vw, 32px);
            font-weight: 800;
            letter-spacing: -0.02em;
            color: var(--text);
        }

        .results-heading .hl {
            color: var(--accent);
        }

        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 640px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
        }

        .results-grid .result-hero {
            margin-bottom: 0;
        }

        /* PANEL */
        .panel {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 32px;
        }

        .panel-label {
            font-family: var(--font-mono);
            font-size: 10px;
            font-weight: 500;
            color: var(--muted);
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .panel-label::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
        }

        /* VEHICLE SELECTOR */
        .fuel-section {
            margin-bottom: 20px;
        }

        .fuel-section:last-child {
            margin-bottom: 12px;
        }

        .fuel-section-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: var(--font-mono);
            font-size: 10px;
            font-weight: 500;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .fuel-section-label .fuel-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .fuel-section-label .fuel-line {
            flex: 1;
            height: 1px;
            background: var(--border);
        }

        .fuel-petrol .fuel-dot {
            background: var(--accent);
        }

        .fuel-petrol .fuel-section-label {
            color: var(--accent);
        }

        .fuel-diesel .fuel-dot {
            background: var(--accent-amber);
        }

        .fuel-diesel .fuel-section-label {
            color: var(--accent-amber);
        }

        .fuel-electric .fuel-dot {
            background: var(--accent2);
        }

        .fuel-electric .fuel-section-label {
            color: var(--accent2);
        }

        .fuel-cng .fuel-dot {
            background: #a78bfa;
        }

        .fuel-cng .fuel-section-label {
            color: #a78bfa;
        }

        .fuel-cng .vehicle-option input:checked+.vehicle-card {
            border-color: #a78bfa;
            background: rgba(167, 139, 250, 0.07);
        }

        /* ‚îÄ‚îÄ‚îÄ BS STANDARD SELECTOR ‚îÄ‚îÄ‚îÄ */
        .bs-wrap {
            margin-bottom: 28px;
        }

        /* year dropdown */
        .year-select-wrap {
            display: flex;
            align-items: center;
            gap: 10px;
            border: 1.5px solid var(--border);
            border-radius: 14px;
            background: var(--surface2);
            padding: 0 16px;
            transition: border-color 0.2s;
            margin-bottom: 12px;
            position: relative;
        }

        .year-select-wrap::after {
            content: '';
            display: block;
            width: 10px;
            height: 6px;
            flex-shrink: 0;
            background: var(--muted);
            clip-path: polygon(0 0, 100% 0, 50% 100%);
            pointer-events: none;
            transition: background 0.2s;
        }

        .year-select-wrap:focus-within::after {
            background: var(--accent);
        }

        .year-select-wrap:focus-within {
            border-color: var(--accent);
        }

        .year-icon {
            font-size: 18px;
            line-height: 1;
            flex-shrink: 0;
        }

        #mfg-year {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: var(--text);
            font-family: var(--font-display);
            font-size: 18px;
            font-weight: 700;
            padding: 16px 0;
            padding-right: 8px;
            appearance: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        #mfg-year option {
            background: #131920;
        }

        /* BS auto-detected result card */
        .bs-result {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 14px 18px;
            border-radius: 14px;
            border: 1.5px solid var(--border);
            background: var(--surface2);
            transition: border-color 0.4s, background 0.4s;
            margin-bottom: 8px;
        }

        .bs-result.bs-state-BS2 {
            border-color: #f43f5e;
            background: rgba(244, 63, 94, 0.07);
        }

        .bs-result.bs-state-BS3 {
            border-color: #f97316;
            background: rgba(249, 115, 22, 0.07);
        }

        .bs-result.bs-state-BS4 {
            border-color: #f59e0b;
            background: rgba(245, 158, 11, 0.07);
        }

        .bs-result.bs-state-BS6 {
            border-color: #00e5a0;
            background: rgba(0, 229, 160, 0.07);
        }

        .bs-result-left {
            flex: 1;
        }

        .bs-result-norm {
            font-family: var(--font-display);
            font-size: 22px;
            font-weight: 800;
            color: var(--text);
            letter-spacing: -0.02em;
        }

        .bs-result-range {
            font-family: var(--font-mono);
            font-size: 10px;
            color: var(--muted);
            margin-top: 2px;
            letter-spacing: 0.06em;
        }

        .bs-result-mult {
            font-family: var(--font-mono);
            font-size: 11px;
            color: var(--muted);
            white-space: nowrap;
        }

        .badge-critical {
            background: rgba(244, 63, 94, 0.15);
            color: #f43f5e;
        }

        .badge-high {
            background: rgba(249, 115, 22, 0.15);
            color: #f97316;
        }

        .badge-moderate {
            background: rgba(245, 158, 11, 0.15);
            color: #f59e0b;
        }

        .badge-clean {
            background: rgba(0, 229, 160, 0.12);
            color: #00e5a0;
        }

        .bs-note {
            margin-top: 10px;
            font-family: var(--font-mono);
            font-size: 10px;
            color: var(--muted);
            letter-spacing: 0.06em;
        }

        #bs-active-note {
            color: var(--accent);
            font-weight: 600;
        }

        .vehicle-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .vehicle-option {
            cursor: pointer;
        }

        .vehicle-option input {
            display: none;
        }

        .vehicle-card {
            padding: 16px;
            border-radius: 14px;
            border: 1.5px solid var(--border);
            background: var(--surface2);
            transition: border-color 0.2s, background 0.2s, transform 0.15s;
            user-select: none;
        }

        .vehicle-card:hover {
            border-color: rgba(255, 255, 255, 0.15);
            transform: translateY(-1px);
        }

        /* petrol checked */
        .fuel-petrol .vehicle-option input:checked+.vehicle-card {
            border-color: var(--accent);
            background: rgba(0, 229, 160, 0.07);
        }

        /* diesel checked */
        .fuel-diesel .vehicle-option input:checked+.vehicle-card {
            border-color: var(--accent-amber);
            background: rgba(245, 158, 11, 0.07);
        }

        /* electric checked */
        .fuel-electric .vehicle-option input:checked+.vehicle-card {
            border-color: var(--accent2);
            background: rgba(14, 165, 233, 0.07);
        }

        .vehicle-icon {
            font-size: 22px;
            margin-bottom: 8px;
        }

        .vehicle-name {
            font-family: var(--font-display);
            font-size: 14px;
            font-weight: 700;
            color: var(--text);
        }

        .vehicle-sub {
            font-size: 11px;
            color: var(--muted);
            margin-top: 2px;
            font-family: var(--font-mono);
        }

        /* DISTANCE INPUT */
        .distance-wrap {
            display: flex;
            border: 1.5px solid var(--border);
            border-radius: 14px;
            overflow: hidden;
            background: var(--surface2);
            transition: border-color 0.2s;
        }

        .distance-wrap:focus-within {
            border-color: var(--accent);
        }

        #distance {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: var(--text);
            font-family: var(--font-display);
            font-size: 32px;
            font-weight: 700;
            padding: 20px 24px;
            width: 0;
        }

        #distance::placeholder {
            color: var(--muted);
        }

        #unit-select {
            background: rgba(255, 255, 255, 0.04);
            border: none;
            border-left: 1px solid var(--border);
            color: var(--accent);
            font-family: var(--font-mono);
            font-size: 13px;
            font-weight: 500;
            padding: 0 20px;
            cursor: pointer;
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            min-width: 70px;
            text-align: center;
        }

        /* RESULTS */
        .result-hero {
            background: linear-gradient(135deg, var(--surface) 0%, #0a1a14 100%);
            border: 1px solid rgba(0, 229, 160, 0.15);
            border-radius: 20px;
            padding: 36px 32px;
            position: relative;
            overflow: hidden;
            margin-bottom: 16px;
        }

        .result-hero::before {
            content: '';
            position: absolute;
            top: -60px;
            right: -60px;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(0, 229, 160, 0.15) 0%, transparent 70%);
            pointer-events: none;
        }

        .result-label {
            font-family: var(--font-mono);
            font-size: 10px;
            color: var(--accent);
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 12px;
        }

        .result-number {
            font-family: var(--font-display);
            font-size: clamp(56px, 8vw, 80px);
            font-weight: 800;
            line-height: 1;
            color: var(--text);
            letter-spacing: -0.03em;
        }

        .result-unit {
            font-size: 22px;
            color: var(--muted);
            font-weight: 400;
            margin-left: 8px;
        }

        .result-meta {
            display: flex;
            gap: 0;
            margin-top: 28px;
            border-top: 1px solid var(--border);
            padding-top: 20px;
        }

        .result-meta-item {
            flex: 1;
            padding-right: 20px;
        }

        .result-meta-item+.result-meta-item {
            padding-left: 20px;
            border-left: 1px solid var(--border);
            padding-right: 0;
        }

        .meta-label {
            font-family: var(--font-mono);
            font-size: 10px;
            color: var(--muted);
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-bottom: 6px;
        }

        .meta-value {
            font-family: var(--font-mono);
            font-size: 14px;
            font-weight: 500;
            color: var(--accent);
        }

        /* EQUIVALENCIES */
        .equiv-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 16px;
        }

        .equiv-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 16px;
            text-align: center;
        }

        .equiv-icon {
            font-size: 24px;
            margin-bottom: 6px;
        }

        .equiv-val {
            font-family: var(--font-display);
            font-size: 18px;
            font-weight: 700;
            color: var(--text);
        }

        .equiv-desc {
            font-size: 10px;
            color: var(--muted);
            margin-top: 2px;
            font-family: var(--font-mono);
            letter-spacing: 0.05em;
        }

        /* CHART */
        .chart-panel {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 24px;
            position: relative;
        }

        .chart-title {
            font-family: var(--font-mono);
            font-size: 10px;
            color: var(--muted);
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 16px;
        }

        .chart-canvas-wrap {
            height: 180px;
            position: relative;
        }

        /* ISO BADGE */
        .iso-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(0, 229, 160, 0.06);
            border: 1px solid rgba(0, 229, 160, 0.2);
            padding: 6px 12px;
            border-radius: 8px;
            font-family: var(--font-mono);
            font-size: 10px;
            color: var(--accent);
            letter-spacing: 0.1em;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 28px;
        }

        /* ‚îÄ‚îÄ‚îÄ DOWNLOAD BAR ‚îÄ‚îÄ‚îÄ */
        .download-bar {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 4px;
        }

        .dl-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 100px;
            border: 1.5px solid var(--border);
            background: var(--surface2);
            color: var(--text);
            font-family: var(--font-mono);
            font-size: 12px;
            font-weight: 500;
            letter-spacing: 0.08em;
            cursor: pointer;
            transition: border-color 0.2s, background 0.2s, color 0.2s, transform 0.15s;
        }

        .dl-btn:hover {
            transform: translateY(-1px);
        }

        .dl-btn.dl-csv:hover {
            border-color: var(--accent);
            background: rgba(0, 229, 160, 0.08);
            color: var(--accent);
        }

        .dl-btn.dl-pdf:hover {
            border-color: var(--accent2);
            background: rgba(14, 165, 233, 0.08);
            color: var(--accent2);
        }

        /* ‚îÄ‚îÄ‚îÄ REMEDIAL MEASURES PAGE ‚îÄ‚îÄ‚îÄ */
        #section-remedies {
            display: none;
            flex-direction: column;
            min-height: 100vh;
        }

        .remedies-main {
            max-width: 860px;
            width: 100%;
            margin: 0 auto;
            padding: 48px 24px 64px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            animation: slide-in 0.5s cubic-bezier(0.22, 1, 0.36, 1) both;
        }

        .remedies-heading {
            font-family: var(--font-display);
            font-size: clamp(22px, 4vw, 32px);
            font-weight: 800;
            letter-spacing: -0.02em;
            color: var(--text);
        }

        .remedies-heading .hl {
            color: var(--accent);
        }

        .remedies-context {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        .ctx-chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 5px 12px;
            border-radius: 100px;
            border: 1px solid var(--border);
            background: var(--surface2);
            font-family: var(--font-mono);
            font-size: 10px;
            color: var(--muted);
            letter-spacing: 0.1em;
        }

        .ctx-chip span {
            color: var(--accent);
            font-weight: 600;
        }

        .remedy-section-title {
            font-family: var(--font-mono);
            font-size: 10px;
            font-weight: 500;
            color: var(--muted);
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .remedy-section-title::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
        }

        .remedy-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 14px;
        }

        .remedy-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            transition: border-color 0.2s, transform 0.15s;
        }

        .remedy-card:hover {
            border-color: rgba(0, 229, 160, 0.25);
            transform: translateY(-2px);
        }

        .remedy-card-icon {
            font-size: 26px;
            line-height: 1;
        }

        .remedy-card-title {
            font-family: var(--font-display);
            font-size: 15px;
            font-weight: 700;
            color: var(--text);
            letter-spacing: -0.01em;
        }

        .remedy-card-desc {
            font-size: 12px;
            color: var(--muted);
            line-height: 1.6;
        }

        .remedy-card-impact {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            margin-top: auto;
            font-family: var(--font-mono);
            font-size: 10px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 100px;
            width: fit-content;
        }

        .impact-high {
            background: rgba(0, 229, 160, 0.1);
            color: var(--accent);
        }

        .impact-medium {
            background: rgba(245, 158, 11, 0.1);
            color: var(--accent-amber);
        }

        .impact-low {
            background: rgba(14, 165, 233, 0.1);
            color: var(--accent2);
        }

        .remedies-cta-btn {
            width: 100%;
            padding: 18px 32px;
            background: var(--accent);
            color: #000;
            font-family: var(--font-display);
            font-size: 16px;
            font-weight: 700;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            letter-spacing: 0.01em;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 0 40px rgba(0, 229, 160, 0.25);
        }

        .remedies-cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 60px rgba(0, 229, 160, 0.45);
        }

        /* ‚îÄ‚îÄ‚îÄ PRINT STYLES ‚îÄ‚îÄ‚îÄ */
        @media print {
            body {
                background: #fff !important;
                color: #111 !important;
            }

            #section-cover,
            #section-app,
            nav,
            .results-back-bar,
            .download-bar {
                display: none !important;
            }

            #section-results {
                display: block !important;
            }

            #section-remedies {
                display: block !important;
            }

            .results-main,
            .remedies-main {
                padding: 0 !important;
                max-width: 100% !important;
            }

            .result-hero,
            .panel,
            .chart-panel,
            .equiv-card,
            .remedy-card {
                background: #f9f9f9 !important;
                border: 1px solid #ddd !important;
                color: #111 !important;
            }

            .result-number,
            .equiv-val,
            .results-heading,
            .remedies-heading {
                color: #111 !important;
            }

            .meta-value,
            .result-label,
            .chart-title,
            .remedy-card-title {
                color: #444 !important;
            }

            .remedy-card-desc {
                color: #555 !important;
            }

            .compare-track {
                background: #eee !important;
            }

            canvas {
                max-width: 100% !important;
            }
        }

        /* ‚îÄ‚îÄ‚îÄ COMPARE BAR ‚îÄ‚îÄ‚îÄ */
        .compare-wrap {
            margin-top: 0;
        }

        .compare-label {
            display: flex;
            justify-content: space-between;
            font-family: var(--font-mono);
            font-size: 10px;
            color: var(--muted);
            letter-spacing: 0.1em;
            margin-bottom: 8px;
        }

        .compare-track {
            height: 6px;
            background: rgba(255, 255, 255, 0.06);
            border-radius: 100px;
            overflow: hidden;
            margin-bottom: 16px;
        }

        .compare-fill {
            height: 100%;
            border-radius: 100px;
            background: var(--accent);
            transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            width: 0%;
        }

        .compare-fill.danger {
            background: var(--accent-red);
        }

        .compare-fill.warning {
            background: var(--accent-amber);
        }

        /* ‚îÄ‚îÄ‚îÄ BS REFERENCE TABLE ‚îÄ‚îÄ‚îÄ */
        .bs-ref-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 14px;
            font-family: var(--font-mono);
            font-size: 10px;
            border-radius: 10px;
            overflow: hidden;
        }

        .bs-ref-table thead th {
            background: rgba(255, 255, 255, 0.04);
            color: var(--muted);
            letter-spacing: 0.15em;
            text-transform: uppercase;
            padding: 7px 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .bs-ref-table tbody tr {
            border-bottom: 1px solid var(--border);
            transition: background 0.15s;
        }

        .bs-ref-table tbody tr:last-child {
            border-bottom: none;
        }

        .bs-ref-table tbody tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .bs-ref-table td {
            padding: 7px 12px;
            color: var(--muted);
        }

        .bs-ref-table td:last-child {
            font-weight: 600;
        }

        .bs-ref-table .bs-BS2 {
            color: #f43f5e;
        }

        .bs-ref-table .bs-BS3 {
            color: #f97316;
        }

        .bs-ref-table .bs-BS4 {
            color: #f59e0b;
        }

        .bs-ref-table .bs-BS6 {
            color: var(--accent);
        }
    </style>
</head>

<body>

    <!-- ‚îÄ‚îÄ‚îÄ COVER ‚îÄ‚îÄ‚îÄ -->
    <div id="section-cover">
        <div class="cover-grid"></div>
        <div class="cover-orb orb-1"></div>
        <div class="cover-orb orb-2"></div>
        <div class="cover-orb orb-3"></div>

        <div
            style="position:relative; z-index:10; text-align:center; display:flex; flex-direction:column; align-items:center;">
            <div class="cover-badge">
                <span class="dot-live"></span>
                System Online ¬∑ EPA 2026 Data
            </div>

            <h1 class="cover-title">
                Carbon<span class="hl">Audit</span>
            </h1>

            <p class="cover-sub">Precision emissions tracking for modern logistics operations.</p>

            <button class="cover-btn" onclick="startApp()">
                Let's Calculate
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2.5"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5 12h14M12 5l7 7-7 7" />
                </svg>
            </button>
        </div>

        <div class="cover-footnote">Hackathon Build v2.5 &nbsp;¬∑&nbsp; EPA 2026</div>
    </div>


    <!-- ‚îÄ‚îÄ‚îÄ APP ‚îÄ‚îÄ‚îÄ -->
    <div id="section-app">

        <nav>
            <div class="nav-logo" onclick="resetApp()">
                <div class="nav-logo-mark">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M12 2a10 10 0 1 0 10 10" />
                        <path d="M12 8v4l3 3" />
                        <path d="M18 2v6h6" />
                    </svg>
                </div>
                <span class="nav-name">CarbonAudit</span>
            </div>

            <button class="nav-exit" onclick="resetApp()">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18.36 6.64A9 9 0 1 1 5.64 19.36M12 2v10" />
                </svg>
                Exit
            </button>
        </nav>

        <main>

            <!-- LEFT: INPUT -->
            <div>
                <div class="panel">
                    <div class="status-bar">
                        <div class="panel-label" style="margin-bottom:0; flex:1;">Vehicle Class</div>

                    </div>

                    <!-- ‚îÄ‚îÄ PETROL ‚îÄ‚îÄ -->
                    <div class="fuel-section fuel-petrol">
                        <div class="fuel-section-label">
                            <span class="fuel-dot"></span>
                            Petrol
                            <span class="fuel-line"></span>
                        </div>
                        <div class="vehicle-grid">
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="petrol_car" checked>
                                <div class="vehicle-card">
                                    <div class="vehicle-icon">üöó</div>
                                    <div class="vehicle-name">Passenger Car</div>
                                    <div class="vehicle-sub">Petrol ¬∑ Class 1</div>
                                </div>
                            </label>
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="petrol_van">
                                <div class="vehicle-card">
                                    <div class="vehicle-icon">üöê</div>
                                    <div class="vehicle-name">Light Van</div>
                                    <div class="vehicle-sub">Petrol ¬∑ Class 2</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- ‚îÄ‚îÄ 2-WHEELER ‚îÄ‚îÄ -->
                    <div class="fuel-section" style="--fuel-color:#f43f5e;">
                        <div class="fuel-section-label" style="color:#f43f5e;">
                            <span class="fuel-dot" style="background:#f43f5e;"></span>
                            2-Wheeler
                            <span class="fuel-line"></span>
                        </div>
                        <div class="vehicle-grid">
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="bike_petrol">
                                <div class="vehicle-card" style="--chk-border:#f43f5e; --chk-bg:rgba(244,63,94,0.07);">
                                    <div class="vehicle-icon">üèçÔ∏è</div>
                                    <div class="vehicle-name">Petrol Bike</div>
                                    <div class="vehicle-sub">Motorcycle ¬∑ 2W</div>
                                </div>
                            </label>
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="scooter_petrol">
                                <div class="vehicle-card" style="--chk-border:#f43f5e; --chk-bg:rgba(244,63,94,0.07);">
                                    <div class="vehicle-icon">üõµ</div>
                                    <div class="vehicle-name">Petrol Scooter</div>
                                    <div class="vehicle-sub">Scooter ¬∑ 2W</div>
                                </div>
                            </label>
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="scooter_electric">
                                <div class="vehicle-card" style="--chk-border:#0ea5e9; --chk-bg:rgba(14,165,233,0.07);">
                                    <div class="vehicle-icon">‚ö°üõµ</div>
                                    <div class="vehicle-name">Electric Scooter</div>
                                    <div class="vehicle-sub">EV ¬∑ 2W</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div class="fuel-section fuel-diesel">
                        <div class="fuel-section-label">
                            <span class="fuel-dot"></span>
                            Diesel
                            <span class="fuel-line"></span>
                        </div>
                        <div class="vehicle-grid">
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="diesel_car">
                                <div class="vehicle-card">
                                    <div class="vehicle-icon">üöó</div>
                                    <div class="vehicle-name">Passenger Car</div>
                                    <div class="vehicle-sub">Diesel ¬∑ Class 1</div>
                                </div>
                            </label>
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="diesel_van">
                                <div class="vehicle-card">
                                    <div class="vehicle-icon">üöê</div>
                                    <div class="vehicle-name">Light Van</div>
                                    <div class="vehicle-sub">Diesel ¬∑ Class 2</div>
                                </div>
                            </label>
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="diesel_truck">
                                <div class="vehicle-card">
                                    <div class="vehicle-icon">üöõ</div>
                                    <div class="vehicle-name">Heavy Truck</div>
                                    <div class="vehicle-sub">Diesel ¬∑ Class 8</div>
                                </div>
                            </label>
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="diesel_bus">
                                <div class="vehicle-card">
                                    <div class="vehicle-icon">üöå</div>
                                    <div class="vehicle-name">City Bus</div>
                                    <div class="vehicle-sub">Diesel ¬∑ Transit</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- ‚îÄ‚îÄ ELECTRIC ‚îÄ‚îÄ -->
                    <div class="fuel-section fuel-electric">
                        <div class="fuel-section-label">
                            <span class="fuel-dot"></span>
                            Electric
                            <span class="fuel-line"></span>
                        </div>
                        <div class="vehicle-grid">
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="electric">
                                <div class="vehicle-card">
                                    <div class="vehicle-icon">‚ö°</div>
                                    <div class="vehicle-name">Electric EV</div>
                                    <div class="vehicle-sub">Grid Mix ¬∑ Zero Tail</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- ‚îÄ‚îÄ CNG ‚îÄ‚îÄ -->
                    <div class="fuel-section fuel-cng">
                        <div class="fuel-section-label">
                            <span class="fuel-dot"></span>
                            CNG
                            <span class="fuel-line"></span>
                        </div>
                        <div class="vehicle-grid">
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="cng_auto">
                                <div class="vehicle-card">
                                    <div class="vehicle-icon">üõ∫</div>
                                    <div class="vehicle-name">Auto Rickshaw</div>
                                    <div class="vehicle-sub">CNG ¬∑ 3-Wheeler</div>
                                </div>
                            </label>
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="cng_car">
                                <div class="vehicle-card">
                                    <div class="vehicle-icon">üöó</div>
                                    <div class="vehicle-name">Passenger Car</div>
                                    <div class="vehicle-sub">CNG ¬∑ Class 1</div>
                                </div>
                            </label>
                            <label class="vehicle-option">
                                <input type="radio" name="vehicle" value="cng_bus">
                                <div class="vehicle-card">
                                    <div class="vehicle-icon">üöå</div>
                                    <div class="vehicle-name">City Bus</div>
                                    <div class="vehicle-sub">CNG ¬∑ Transit</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- ‚îÄ‚îÄ BS STANDARD ‚îÄ‚îÄ -->
                    <div class="bs-wrap">
                        <div class="panel-label">Manufacturing Year &amp; BS Norm</div>

                        <!-- BS Range dropdown -->
                        <div class="year-select-wrap">
                            <span class="year-icon">üìÖ</span>
                            <select id="mfg-year">
                                <option value="" disabled>Select manufacturing year range‚Ä¶</option>
                                <option value="BS2">Before 2010 ‚Äî BS2</option>
                                <option value="BS3">2010 ‚Äì 2017 ‚Äî BS3</option>
                                <option value="BS4">2017 ‚Äì March 2020 ‚Äî BS4</option>
                                <option value="BS6" selected>April 2020 onward ‚Äî BS6</option>
                            </select>
                        </div>

                        <!-- Auto-detected BS result -->
                        <div class="bs-result" id="bs-result">
                            <div class="bs-result-left">
                                <div class="bs-result-norm" id="bs-result-norm">BS6</div>
                                <div class="bs-result-range" id="bs-result-range">April 2020 onward</div>
                            </div>
                            <span class="bs-chip-badge" id="bs-result-badge" style="font-size:11px; padding:4px 10px;">ÔøΩ
                                Cleanest</span>
                            <div class="bs-result-mult" id="bs-result-mult">√ó1.0 ¬∑ Baseline</div>
                        </div>

                        <!-- Hidden radios (still needed for calculate()) -->
                        <div style="display:none">
                            <input type="radio" name="bs" value="BS2" id="bs-radio-BS2">
                            <input type="radio" name="bs" value="BS3" id="bs-radio-BS3">
                            <input type="radio" name="bs" value="BS4" id="bs-radio-BS4">
                            <input type="radio" name="bs" value="BS6" id="bs-radio-BS6" checked>
                        </div>

                        <div class="bs-note">Active multiplier: <span id="bs-active-note">BS6 ¬∑ √ó1.0 (baseline)</span>
                        </div>

                        <!-- BS Reference Table -->
                        <table class="bs-ref-table">
                            <thead>
                                <tr>
                                    <th>Manufacturing Year</th>
                                    <th>BS Norm</th>
                                    <th>Multiplier</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Before 2010</td>
                                    <td class="bs-BS2">BS2</td>
                                    <td class="bs-BS2">√ó2.5 ‚Äî Critical</td>
                                </tr>
                                <tr>
                                    <td>2010 ‚Äì 2017</td>
                                    <td class="bs-BS3">BS3</td>
                                    <td class="bs-BS3">√ó1.8 ‚Äî High</td>
                                </tr>
                                <tr>
                                    <td>2017 ‚Äì March 2020</td>
                                    <td class="bs-BS4">BS4</td>
                                    <td class="bs-BS4">√ó1.3 ‚Äî Moderate</td>
                                </tr>
                                <tr>
                                    <td>April 2020 onward</td>
                                    <td class="bs-BS6">BS6</td>
                                    <td class="bs-BS6">√ó1.0 ‚Äî Baseline</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="panel-label">Distance</div>
                    <div class="distance-wrap">
                        <input type="number" id="distance" placeholder="0" min="0">
                        <select id="unit-select">
                            <option value="km" selected>KM</option>
                            <option value="mi">MI</option>
                        </select>
                    </div>
                </div>

                <!-- CALCULATE BUTTON -->
                <button class="calc-btn" id="calc-btn" onclick="showResults()">
                    Calculate Footprint
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14M12 5l7 7-7 7" />
                    </svg>
                </button>
            </div>

        </main>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ RESULTS PAGE ‚îÄ‚îÄ‚îÄ -->
    <div id="section-results">
        <nav>
            <div class="nav-logo" onclick="goBack()">
                <div class="nav-logo-mark">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M12 2a10 10 0 1 0 10 10" />
                        <path d="M12 8v4l3 3" />
                        <path d="M18 2v6h6" />
                    </svg>
                </div>
                <span class="nav-name">CarbonAudit</span>
            </div>
            <button class="nav-exit" onclick="resetApp()">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18.36 6.64A9 9 0 1 1 5.64 19.36M12 2v10" />
                </svg>
                Exit
            </button>
        </nav>

        <div class="results-main">
            <div class="results-back-bar">
                <button class="back-btn" onclick="goBack()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                    Back to Inputs
                </button>
            </div>

            <div class="results-heading">Your Carbon <span class="hl">Footprint</span></div>

            <!-- Download Actions -->
            <div class="download-bar">
                <button class="dl-btn dl-csv" onclick="downloadCSV()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7 10 12 15 17 10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                    </svg>
                    Download CSV
                </button>
                <button class="dl-btn dl-pdf" onclick="downloadPDF()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                        <polyline points="14 2 14 8 20 8" />
                        <line x1="16" y1="13" x2="8" y2="13" />
                        <line x1="16" y1="17" x2="8" y2="17" />
                        <polyline points="10 9 9 9 8 9" />
                    </svg>
                    Download PDF
                </button>
            </div>

            <div class="results-grid">
                <!-- Result Hero -->
                <div class="result-hero" style="grid-column: 1 / -1;">
                    <div class="result-label">‚ñ∏ Total Carbon Footprint</div>
                    <div>
                        <span class="result-number" id="result">0.0</span>
                        <span class="result-unit">kg CO‚ÇÇe</span>
                    </div>
                    <div class="result-meta">
                        <div class="result-meta-item">
                            <div class="meta-label">Emission Factor</div>
                            <div class="meta-value" id="factor-display">‚Äî</div>
                        </div>
                        <div class="result-meta-item">
                            <div class="meta-label">Unit System</div>
                            <div class="meta-value" id="method-unit">km</div>
                        </div>
                        <div class="result-meta-item">
                            <div class="meta-label">BS Standard</div>
                            <div class="meta-value" id="result-bs-badge">BS6</div>
                        </div>
                        <div class="result-meta-item">
                            <div class="meta-label">Vehicle</div>
                            <div class="meta-value" id="result-vehicle-badge">‚Äî</div>
                        </div>
                    </div>
                </div>

                <!-- Equivalencies -->
                <div class="equiv-row" style="grid-column: 1 / -1;">
                    <div class="equiv-card">
                        <div class="equiv-icon">üå≥</div>
                        <div class="equiv-val" id="eq-trees">0</div>
                        <div class="equiv-desc">Trees / year</div>
                    </div>
                    <div class="equiv-card">
                        <div class="equiv-icon">üì±</div>
                        <div class="equiv-val" id="eq-phones">0</div>
                        <div class="equiv-desc">Phone charges</div>
                    </div>
                    <div class="equiv-card">
                        <div class="equiv-icon">üè†</div>
                        <div class="equiv-val" id="eq-home">0</div>
                        <div class="equiv-desc">Home hours</div>
                    </div>
                </div>

                <!-- vs. Target bar + chart -->
                <div class="chart-panel" style="grid-column: 1 / -1;">
                    <div class="chart-title">‚ñ∏ Your emissions vs. the safe limit to protect our planet</div>
                    <div class="compare-wrap">
                        <div class="compare-label">
                            <span>Your footprint</span>
                            <span id="pct-label">0%</span>
                        </div>
                        <div class="compare-track">
                            <div class="compare-fill" id="compare-fill"></div>
                        </div>
                    </div>
                    <div class="chart-canvas-wrap">
                        <canvas id="auditChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Remedial Measures CTA -->
            <div style="grid-column: 1 / -1; margin-top: 8px;">
                <button class="remedies-cta-btn" onclick="showRemedies()">
                    üå± View Remedial Measures
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14M12 5l7 7-7 7" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ REMEDIAL MEASURES PAGE ‚îÄ‚îÄ‚îÄ -->
    <div id="section-remedies">
        <nav>
            <div class="nav-logo" onclick="goBackToResults()">
                <div class="nav-logo-mark">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M12 2a10 10 0 1 0 10 10" />
                        <path d="M12 8v4l3 3" />
                        <path d="M18 2v6h6" />
                    </svg>
                </div>
                <span class="nav-name">CarbonAudit</span>
            </div>
            <button class="nav-exit" onclick="resetApp()">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18.36 6.64A9 9 0 1 1 5.64 19.36M12 2v10" />
                </svg>
                Exit
            </button>
        </nav>

        <div class="remedies-main">
            <div class="results-back-bar">
                <button class="back-btn" onclick="goBackToResults()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                    Back to Results
                </button>
            </div>

            <div class="remedies-heading">üå± Remedial <span class="hl">Measures</span></div>

            <!-- Context chips -->
            <div class="remedies-context">
                <div class="ctx-chip">Vehicle: <span id="rem-vehicle">‚Äî</span></div>
                <div class="ctx-chip">BS Norm: <span id="rem-bs">‚Äî</span></div>
                <div class="ctx-chip">Total: <span id="rem-total">‚Äî</span> kg CO‚ÇÇe</div>
                <div class="ctx-chip">vs Target: <span id="rem-pct">‚Äî</span></div>
            </div>

            <!-- Download bar -->
            <div class="download-bar">
                <button class="dl-btn dl-csv" onclick="downloadRemediesCSV()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7 10 12 15 17 10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                    </svg>
                    Download CSV
                </button>
                <button class="dl-btn dl-pdf" onclick="window.print()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                        <polyline points="14 2 14 8 20 8" />
                        <line x1="16" y1="13" x2="8" y2="13" />
                        <line x1="16" y1="17" x2="8" y2="17" />
                    </svg>
                    Download PDF
                </button>
            </div>

            <!-- Dynamic remedy cards injected here by JS -->
            <div id="remedy-sections"></div>
        </div>
    </div>

    <script>
        function startApp() {
            document.getElementById('section-cover').style.display = 'none';
            document.getElementById('section-app').style.display = 'flex';
            document.getElementById('section-results').style.display = 'none';
            document.getElementById('section-remedies').style.display = 'none';
        }

        function goBackToResults() {
            document.getElementById('section-remedies').style.display = 'none';
            document.getElementById('section-results').style.display = 'flex';
        }

        function showRemedies() {
            // Fill context chips
            const vehicle = document.getElementById('result-vehicle-badge').textContent;
            const bs = document.getElementById('result-bs-badge').textContent;
            const total = document.getElementById('result').textContent;
            const pct = document.getElementById('pct-label').textContent;

            document.getElementById('rem-vehicle').textContent = vehicle;
            document.getElementById('rem-bs').textContent = bs;
            document.getElementById('rem-total').textContent = total;
            document.getElementById('rem-pct').textContent = pct;

            // Build remedy sections
            const container = document.getElementById('remedy-sections');
            container.innerHTML = '';

            const REMEDIES = {
                immediate: [
                    { icon: 'üõõ', title: 'Reduce Idling Time', desc: 'Switch off engine when stationary for more than 60 seconds. Idling burns fuel and emits CO‚ÇÇ with zero productivity.', impact: 'high' },
                    { icon: 'üí®', title: 'Maintain Optimal Tyre Pressure', desc: 'Under-inflated tyres increase fuel consumption by up to 3%. Check pressure weekly.', impact: 'medium' },
                    { icon: 'üìç', title: 'Route Optimisation', desc: 'Use GPS route planning to avoid congestion hot-spots and reduce total km travelled per trip.', impact: 'high' },
                    { icon: '‚öΩ', title: 'Eco-Driving Techniques', desc: 'Smooth acceleration and anticipatory braking can cut fuel burn by 10‚Äì15%.', impact: 'high' },
                ],
                shortTerm: [
                    { icon: 'üîß', title: 'Regular Engine Servicing', desc: 'A well-tuned engine burns fuel more efficiently. Service every 5,000 km or as recommended.', impact: 'high' },
                    { icon: 'üíö', title: 'Switch to Biofuels / E10', desc: 'Blended ethanol fuels (E10) can reduce lifecycle CO‚ÇÇ by up to 7% with no engine modification.', impact: 'medium' },
                    { icon: 'üì¶', title: 'Load Optimisation', desc: 'Reduce deadweight by reviewing cargo loads. Every extra 50 kg cuts fuel efficiency by ~2%.', impact: 'medium' },
                    { icon: 'üìä', title: 'Fleet Telematics', desc: 'Install telematics to monitor driver behaviour, harsh braking, and excess speed in real time.', impact: 'high' },
                ],
                longTerm: [
                    { icon: '‚ö°', title: 'Transition to Electric Vehicles', desc: 'EVs emit ~75% less CO‚ÇÇ on average over their lifetime compared to petrol or diesel equivalents.', impact: 'high' },
                    { icon: 'üöå', title: 'Adopt CNG / Hybrid Vehicles', desc: 'CNG vehicles emit ~20-25% less CO‚ÇÇ than petrol. Hybrid vehicles are a bridge to full electrification.', impact: 'high' },
                    { icon: '‚òÄÔ∏è', title: 'Solar-Powered Depots', desc: 'Power charging infrastructure and warehouses with rooftop solar to decarbonise the supply chain.', impact: 'medium' },
                    { icon: 'üå≥', title: 'Carbon Offset Programme', desc: 'Enrol in verified offset schemes (Gold Standard / VCS) to neutralise residual emissions while transitioning.', impact: 'low' },
                ],
            };

            // Add BS-specific urgent tip
            if (bs === 'BS2') {
                REMEDIES.immediate.unshift({ icon: 'üö®', title: 'Retrofit or Replace BS2 Vehicle', desc: 'BS2 vehicles emit 2.5√ó more than BS6 baseline. Retrofit with emission control devices or prioritise immediate replacement.', impact: 'high' });
            } else if (bs === 'BS3') {
                REMEDIES.immediate.unshift({ icon: '‚ö†Ô∏è', title: 'Consider BS6 Upgrade', desc: 'BS3 vehicles emit 1.8√ó more than BS6. Plan for vehicle phase-out within 2 years to remain within emission budgets.', impact: 'high' });
            } else if (bs === 'BS4') {
                REMEDIES.shortTerm.unshift({ icon: 'üîÑ', title: 'Upgrade to BS6', desc: 'BS4 emits 1.3√ó more than BS6. The gap can be closed affordably by 2026 with new BS6 models now widely available.', impact: 'medium' });
            }

            const SECTION_LABELS = {
                immediate: 'Immediate Actions',
                shortTerm: 'Short-Term (1‚Äì12 months)',
                longTerm: 'Long-Term Strategy',
            };
            const IMPACT_LABELS = { high: '‚¨Ü High Impact', medium: '‚Üí Medium Impact', low: '‚Üò Low Impact' };

            Object.entries(REMEDIES).forEach(([key, cards]) => {
                const section = document.createElement('div');
                section.style.marginBottom = '20px';
                section.innerHTML = `<div class="remedy-section-title">${SECTION_LABELS[key]}</div>`;
                const grid = document.createElement('div');
                grid.className = 'remedy-cards';
                cards.forEach(c => {
                    grid.innerHTML += `
                        <div class="remedy-card">
                            <div class="remedy-card-icon">${c.icon}</div>
                            <div class="remedy-card-title">${c.title}</div>
                            <div class="remedy-card-desc">${c.desc}</div>
                            <div class="remedy-card-impact impact-${c.impact}">${IMPACT_LABELS[c.impact]}</div>
                        </div>`;
                });
                section.appendChild(grid);
                container.appendChild(section);
            });

            document.getElementById('section-results').style.display = 'none';
            document.getElementById('section-remedies').style.display = 'flex';
            document.getElementById('section-remedies').scrollTop = 0;
            window.scrollTo(0, 0);
        }

        function downloadRemediesCSV() {
            const vehicle = document.getElementById('rem-vehicle').textContent;
            const bs = document.getElementById('rem-bs').textContent;
            const total = document.getElementById('rem-total').textContent;
            const pct = document.getElementById('rem-pct').textContent;
            const date = new Date().toISOString().split('T')[0];

            const cards = document.querySelectorAll('#remedy-sections .remedy-card');
            const rows = [
                ['CarbonAudit ‚Äî Remedial Measures Report', date],
                ['Vehicle', vehicle], ['BS Standard', bs],
                ['Total Footprint (kg CO‚ÇÇe)', total], ['vs. Paris Target', pct],
                [],
                ['Category', 'Measure', 'Description', 'Impact'],
            ];

            let currentSection = '';
            document.querySelectorAll('#remedy-sections > div').forEach(sec => {
                currentSection = sec.querySelector('.remedy-section-title')?.textContent?.trim() || '';
                sec.querySelectorAll('.remedy-card').forEach(card => {
                    rows.push([
                        currentSection,
                        card.querySelector('.remedy-card-title')?.textContent || '',
                        card.querySelector('.remedy-card-desc')?.textContent || '',
                        card.querySelector('.remedy-card-impact')?.textContent?.trim() || '',
                    ]);
                });
            });

            const csv = rows.map(r => r.map(c => `"${String(c).replace(/"/g, '""')}"`).join(',')).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `CarbonAudit_Remedies_${date}.csv`;
            a.click();
        }

        function downloadCSV() {
            const total = document.getElementById('result').textContent;
            const factor = document.getElementById('factor-display').textContent;
            const unit = document.getElementById('method-unit').textContent;
            const bs = document.getElementById('result-bs-badge').textContent;
            const vehicle = document.getElementById('result-vehicle-badge').textContent;
            const trees = document.getElementById('eq-trees').textContent;
            const phones = document.getElementById('eq-phones').textContent;
            const home = document.getElementById('eq-home').textContent;
            const pct = document.getElementById('pct-label').textContent;
            const date = new Date().toISOString().split('T')[0];

            const rows = [
                ['CarbonAudit Report', date],
                [],
                ['Field', 'Value'],
                ['Total Carbon Footprint (kg CO‚ÇÇe)', total],
                ['Emission Factor', factor],
                ['Unit System', unit],
                ['BS Standard', bs],
                ['Vehicle Type', vehicle],
                ['vs. Paris Target', pct],
                [],
                ['Equivalencies', ''],
                ['Trees to Offset (per year)', trees],
                ['Phone Charges Equivalent', phones],
                ['Home Hours Equivalent', home],
            ];

            const csv = rows.map(r => r.map(c => `"${c}"`).join(',')).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `CarbonAudit_${date}.csv`;
            a.click();
        }

        function downloadPDF() {
            window.print();
        }

        function showResults() {
            const dist = parseFloat(document.getElementById('distance').value) || 0;
            if (dist <= 0) {
                document.getElementById('distance').focus();
                document.getElementById('distance').style.outline = '2px solid #f43f5e';
                setTimeout(() => document.getElementById('distance').style.outline = '', 1200);
                return;
            }
            calculate();
            document.getElementById('section-app').style.display = 'none';
            document.getElementById('section-results').style.display = 'flex';
            if (window.myChart) setTimeout(() => window.myChart.resize(), 50);
        }

        function goBack() {
            document.getElementById('section-results').style.display = 'none';
            document.getElementById('section-app').style.display = 'flex';
        }

        function resetApp() {
            document.getElementById('section-app').style.display = 'none';
            document.getElementById('section-results').style.display = 'none';
            document.getElementById('section-cover').style.display = 'flex';
            document.getElementById('distance').value = '';
            document.getElementById('result').textContent = '0.0';
        }

        document.addEventListener('DOMContentLoaded', function () {
            // EPA / CPCB emission factors in kg CO2e per mile (at BS6 baseline)
            const FACTORS_MILE = {
                // Petrol
                petrol_car: { val: 0.355, color: '#00e5a0' },
                petrol_van: { val: 0.460, color: '#00e5a0' },
                // 2-Wheelers
                bike_petrol: { val: 0.137, color: '#f43f5e' },
                scooter_petrol: { val: 0.120, color: '#f43f5e' },
                scooter_electric: { val: 0.065, color: '#0ea5e9' },
                // Diesel
                diesel_car: { val: 0.340, color: '#f59e0b' },
                diesel_van: { val: 0.476, color: '#f59e0b' },
                diesel_truck: { val: 1.631, color: '#f43f5e' },
                diesel_bus: { val: 2.385, color: '#f43f5e' },
                // CNG (approx 20-25% lower CO2 than petrol)
                cng_auto: { val: 0.098, color: '#a78bfa' },
                cng_car: { val: 0.270, color: '#a78bfa' },
                cng_bus: { val: 1.520, color: '#a78bfa' },
                // Electric
                electric: { val: 0.110, color: '#0ea5e9' }
            };
            const KM = 1.60934;

            // Bharat Stage emission multipliers (relative to BS6 baseline)
            const BS_MULTIPLIERS = {
                BS2: { mult: 2.5, label: 'BS2', note: '√ó2.5 ‚Äî Critical' },
                BS3: { mult: 1.8, label: 'BS3', note: '√ó1.8 ‚Äî High' },
                BS4: { mult: 1.3, label: 'BS4', note: '√ó1.3 ‚Äî Moderate' },
                BS6: { mult: 1.0, label: 'BS6', note: '√ó1.0 (baseline)' }
            };

            // Science-based targets per vehicle type aligned to Paris Agreement 1.5¬∞C pathway
            // All values in kg CO2e per km (BS6 baseline)
            const PARIS_TARGETS_KM = {
                petrol_car: { kg: 0.0495, label: 'Safe Limit ‚Äî Petrol Car', source: 'Max a petrol car can emit to stay within 1.5¬∞C' },
                petrol_van: { kg: 0.0906, label: 'Safe Limit ‚Äî Petrol Van', source: 'Max a petrol van can emit to stay within 1.5¬∞C' },
                bike_petrol: { kg: 0.025, label: 'Safe Limit ‚Äî Petrol Bike', source: 'Max a petrol motorcycle can emit to stay within 1.5¬∞C' },
                scooter_petrol: { kg: 0.025, label: 'Safe Limit ‚Äî Petrol Scooter', source: 'Max a petrol scooter can emit to stay within 1.5¬∞C' },
                scooter_electric: { kg: 0.020, label: 'Safe Limit ‚Äî Electric Scooter', source: 'Max an e-scooter can emit (grid mix) to stay within 1.5¬∞C' },
                diesel_car: { kg: 0.0495, label: 'Safe Limit ‚Äî Diesel Car', source: 'Max a diesel car can emit to stay within 1.5¬∞C' },
                diesel_van: { kg: 0.0906, label: 'Safe Limit ‚Äî Diesel Van', source: 'Max a diesel van can emit to stay within 1.5¬∞C' },
                diesel_truck: { kg: 0.540, label: 'Safe Limit ‚Äî Diesel Truck', source: 'Max a heavy truck can emit to stay within 1.5¬∞C' },
                diesel_bus: { kg: 0.720, label: 'Safe Limit ‚Äî Diesel Bus', source: 'Max a city bus can emit to stay within 1.5¬∞C' },
                cng_auto: { kg: 0.035, label: 'Safe Limit ‚Äî CNG Auto', source: 'Max a CNG auto can emit to stay within 1.5¬∞C' },
                cng_car: { kg: 0.0450, label: 'Safe Limit ‚Äî CNG Car', source: 'Max a CNG car can emit to stay within 1.5¬∞C' },
                cng_bus: { kg: 0.620, label: 'Safe Limit ‚Äî CNG Bus', source: 'Max a CNG bus can emit to stay within 1.5¬∞C' },
                electric: { kg: 0.050, label: 'Safe Limit ‚Äî Electric EV', source: 'How clean an EV needs to be to help stop global warming' }
            };
            const PARIS_TARGETS_MI = Object.fromEntries(
                Object.entries(PARIS_TARGETS_KM).map(([k, v]) => [k, { ...v, kg: v.kg * KM }])
            );

            const distInput = document.getElementById('distance');
            const unitSelect = document.getElementById('unit-select');
            const resultEl = document.getElementById('result');
            const factorEl = document.getElementById('factor-display');
            const unitLabelEl = document.getElementById('method-unit');
            const fill = document.getElementById('compare-fill');
            const pctLabel = document.getElementById('pct-label');

            const ctx = document.getElementById('auditChart').getContext('2d');
            window.myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Your Fleet', 'Paris Target'],
                    datasets: [{
                        data: [0, 100],
                        backgroundColor: ['#00e5a0', 'rgba(255,255,255,0.06)'],
                        borderColor: ['#00e5a0', 'rgba(255,255,255,0.1)'],
                        borderWidth: 1,
                        borderRadius: 6,
                        barThickness: 44
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#0d1117',
                            borderColor: 'rgba(255,255,255,0.1)',
                            borderWidth: 1,
                            titleColor: '#475569',
                            bodyColor: '#e2e8f0',
                            titleFont: { family: 'DM Mono', size: 10 },
                            bodyFont: { family: 'DM Mono', size: 13 },
                            callbacks: {
                                label: ctx => ` ${ctx.parsed.y.toFixed(1)} kg CO‚ÇÇe`
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(255,255,255,0.04)' },
                            ticks: { color: '#475569', font: { family: 'DM Mono', size: 10 }, callback: v => v + ' kg' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#475569', font: { family: 'DM Mono', size: 10 } }
                        }
                    }
                }
            });

            window.calculate = function calculate() {
                const radio = document.querySelector('input[name="vehicle"]:checked');
                if (!radio) return;

                const vt = radio.value;
                const dist = parseFloat(distInput.value) || 0;
                const unit = unitSelect.value;
                const base = FACTORS_MILE[vt];

                // Read selected BS standard
                const bsRadio = document.querySelector('input[name="bs"]:checked');
                const bsKey = bsRadio ? bsRadio.value : 'BS6';
                const bsData = BS_MULTIPLIERS[bsKey];
                const bsMult = bsData.mult;

                // Update BS active note
                document.getElementById('bs-active-note').textContent = `${bsData.label} ¬∑ ${bsData.note}`;

                const baseFactor = unit === 'mi' ? base.val : base.val / KM;
                const factor = baseFactor * bsMult;
                const total = dist * factor;

                const parisTarget = unit === 'mi' ? PARIS_TARGETS_MI[vt] : PARIS_TARGETS_KM[vt];
                const targetTotal = dist * parisTarget.kg;

                resultEl.textContent = total.toLocaleString(undefined, { minimumFractionDigits: 1, maximumFractionDigits: 1 });
                factorEl.textContent = `${factor.toFixed(3)} kg/${unit}`;
                unitLabelEl.textContent = unit;

                // Extra result badges
                const bsBadgeEl = document.getElementById('result-bs-badge');
                if (bsBadgeEl) bsBadgeEl.textContent = bsKey;
                const vBadgeEl = document.getElementById('result-vehicle-badge');
                if (vBadgeEl) vBadgeEl.textContent = radio.value.replace('_', ' ').replace(/\b\w/g, c => c.toUpperCase());

                document.querySelector('.chart-title').textContent =
                    `‚ñ∏ Your emissions vs. ${parisTarget.label} ‚Äî ${parisTarget.source}`;

                document.getElementById('eq-trees').textContent = (total / 21.77).toFixed(1);
                document.getElementById('eq-phones').textContent = Math.round(total / 0.00882).toLocaleString();
                document.getElementById('eq-home').textContent = Math.round(total / 0.0117).toLocaleString();

                const pct = targetTotal > 0 ? Math.min((total / targetTotal) * 100, 200) : 0;
                const pctDisplay = targetTotal > 0 ? Math.round((total / targetTotal) * 100) : 0;
                fill.style.width = Math.min(pct, 100) + '%';
                fill.className = 'compare-fill' + (pct > 100 ? ' danger' : pct > 70 ? ' warning' : '');
                pctLabel.textContent = pctDisplay + '% of target';

                if (window.myChart) {
                    window.myChart.data.datasets[0].data[0] = parseFloat(total.toFixed(2));
                    window.myChart.data.datasets[0].data[1] = parseFloat(targetTotal.toFixed(2));
                    window.myChart.data.datasets[0].backgroundColor[0] = base.color;
                    window.myChart.data.datasets[0].borderColor[0] = base.color;
                    window.myChart.data.labels[1] = parisTarget.label;
                    window.myChart.update('active');
                }
            }

            const BS_META = {
                BS2: { badge: 'üî¥ Critical', mult: '√ó2.5', range: 'Before 2010', cls: 'badge-critical', note: '√ó2.5 ‚Äî Critical' },
                BS3: { badge: 'üü† High', mult: '√ó1.8', range: '2010 ‚Äì 2017', cls: 'badge-high', note: '√ó1.8 ‚Äî High' },
                BS4: { badge: 'üü° Moderate', mult: '√ó1.3', range: '2017 ‚Äì March 2020', cls: 'badge-moderate', note: '√ó1.3 ‚Äî Moderate' },
                BS6: { badge: 'üü¢ Cleanest', mult: '√ó1.0', range: 'April 2020 onward', cls: 'badge-clean', note: '√ó1.0 (baseline)' }
            };

            const yearSel = document.getElementById('mfg-year');

            function applyBS(bsKey) {
                const meta = BS_META[bsKey];

                // Update hidden radio so calculate() reads it
                document.getElementById('bs-radio-' + bsKey).checked = true;

                // Update result card
                const resultCard = document.getElementById('bs-result');
                resultCard.className = 'bs-result bs-state-' + bsKey;
                document.getElementById('bs-result-norm').textContent = bsKey;
                document.getElementById('bs-result-range').textContent = meta.range;
                const badge = document.getElementById('bs-result-badge');
                badge.textContent = meta.badge;
                badge.className = 'bs-chip-badge ' + meta.cls;
                document.getElementById('bs-result-mult').textContent = meta.mult + ' ¬∑ ' + (bsKey === 'BS6' ? 'Baseline' : 'vs BS6');
                document.getElementById('bs-active-note').textContent = bsKey + ' ¬∑ ' + meta.note;
            }

            // Set default to BS6
            applyBS('BS6');

            yearSel.addEventListener('change', () => {
                if (yearSel.value) applyBS(yearSel.value);
            });

            document.querySelectorAll('input[name="vehicle"]').forEach(r => r.addEventListener('change', () => { }));
            distInput.addEventListener('input', calculate);
            unitSelect.addEventListener('change', calculate);
        });
    </script>
</body>

</html>